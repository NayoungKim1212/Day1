<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!DOCTYPE html>
<html>
<head>
<title> 자유게시판  </title>

<jsp:include page="/WEB-INF/view/common/common_include.jsp"></jsp:include>

<script type="text/javascript">

	// 페이징 설정 
	var noticePageSize = 5;    	// 화면에 뿌릴 데이터 수 
	var noticePageBlock = 10;		// 블럭으로 잡히는 페이징처리 수
	
	$(document).ready(function() {
		fn_jgrid();
	});
	
	var fn_jgrid = function(curruntPage) {
		
		curruntPage = curruntPage || 1;
		
		var searchKey = $("#searchKey").val();
		var searchWord = $("#searchWord").val();
		
		var param = {
				curruntPage : curruntPage,
				pageSize : noticePageSize,
				searchKey : searchKey,
				searchWord : searchWord
		}
		
		var resultCallback = function(data) {
			fgridinit(data, curruntPage);
		}		
	
		callAjax("/test/jgrid.do", "post", "text", true, param, resultCallback);
		
	}
	
	function fgridinit(data, currentPage){
		 
		 // 일단 기존 목록을 삭제합니다. (변경시 재부팅 용)
		 $("#noticeList").empty();
		 
		 $("#noticeList").append(data);
		 
		 var totalCnt = $("#totalCnt").val(); 
		 
	     var pagingnavi = getPaginationHtml(currentPage, totalCnt, noticePageSize ,noticePageBlock, 'fn_jgrid');
		 
	     //console.log("pagingnavi : " + pagingnavi);
		 // 비운다음에 다시 append 
	     $("#pagingnavi").empty().append(pagingnavi); // 위에꺼를 첨부합니다. 
		
	}
	 	
	
	
</script>


</head>
<body>
	<!-- ///////////////////// html 페이지  ///////////////////////////// -->

<form id="myNotice" action="" method="">

	<div id="wrap_area">

		<h2 class="hidden">header 영역</h2>
		<jsp:include page="/WEB-INF/view/common/header.jsp"></jsp:include>

		<h2 class="hidden">컨텐츠 영역</h2>
		<div id="container">
			<ul>
				<li class="lnb">
					<!-- lnb 영역 --> 
					<jsp:include page="/WEB-INF/view/common/lnbMenu.jsp"></jsp:include> <!--// lnb 영역 -->
				</li>
				<li class="contents">
					<!-- contents -->
					<h3 class="hidden">contents 영역</h3> <!-- content -->
					<div class="content">

						<p class="Location">
							<a href="#" class="btn_set home">메인으로</a> 
							<a href="#" class="btn_nav">학습지원</a> 
								<span class="btn_nav bold">공지 사항</span> 
								<a href="#" class="btn_set refresh">새로고침</a>
						</p>

						<p class="search">
							<select id="searchKey" name="searchKey" style="width: 80px;">
								<option value="title" id="option1" selected="selected">제목</option>
								<option value="write" id="option2">작성자</option>
							</select> <input type="text" class="searchEnter" id="searchWord" name="searchWord" placeholder=""
								style="height: 28px;"> <a class="btnType blue"
								href="javascript:fn_jgrid()" name="search"> <span id="">검색</span>
							</a>
						</p>

						<p class="conTitle">
							<span>공지 사항 </span> <span class="fr"> 
								<c:set var="nullNum" value=""></c:set>
								<a class="btnType blue" href="javascript:fNoticeModal(${nullNum});" name="modal">
								<span>신규등록</span></a>
							</span>
						</p>
						
					    <div id="qggrid">
					        <table class="col">
		                        <caption>caption</caption>
		   
		                                  <colgroup>
		                                     <col width="50px">
		                                     <col width="200px">
		                                      <col width="60px">
		                                     <col width="50px">
		                                </colgroup>
		                        <thead>
		                           <tr>
		                                   <th scope="col">공지 번호</th>
		                                   <th scope="col">공지 제목</th>
		                                   <th scope="col">공지 날짜</th>
		                                   <th scope="col">작성자</th>
		                                   
		                           </tr>
		                        </thead>
		                        <tbody id="noticeList"></tbody>
		                     </table>
					    </div>
					    <div class="paging_area" id="pagingnavi"> </div> 

		
					</div> <!--// content -->

					<h3 class="hidden">풋터 영역</h3>
						<jsp:include page="/WEB-INF/view/common/footer.jsp"></jsp:include>
				</li>
			</ul>
		</div>
	</div>


	<!-- 모달팝업 -->
	<div id="notice" class="layerPop layerType2" style="width: 600px;">
		<input type="hidden" id="nt_no" name="nt_no"> <!-- 수정시 필요한 num 값을 넘김  -->
		
		<dl>
			<dt>
				<strong>공지사항</strong>
			</dt>
			<dd class="content">
				<!-- s : 여기에 내용입력 -->
				<table class="row">
					<caption>caption</caption>

					<tbody>
						<tr>
							<th scope="row">작성자 <span class="font_red">*</span></th>
							<td><input type="text" class="inputTxt p100" name="loginID" id="loginID" /></td>
							<!-- <th scope="row">작성일<span class="font_red">*</span></th>
							<td><input type="text" class="inputTxt p100" name="write_date" id="write_date" /></td> -->
						</tr>
						<tr>
							<th scope="row">제목 <span class="font_red">*</span></th>
							<td colspan="3"><input type="text" class="inputTxt p100"
								name="nt_title" id="nt_title" /></td>
						</tr>
						<tr>
							<th scope="row">내용</th>
							<td colspan="3">
								<textarea class="inputTxt p100" name="nt_note" id="nt_note">
								</textarea>
							</td>
						</tr>
						
					</tbody>
				</table>

				<!-- e : 여기에 내용입력 -->

				<div class="btn_areaC mt30">
					<a href="" class="btnType blue" id="btnSaveNotice" name="btn"><span>저장</span></a> 
					<a href="" class="btnType blue" id="btnUpdateNotice" name="btn" style="display:none"><span>수정</span></a> 
					<a href="" class="btnType blue" id="btnDeleteNotice" name="btn"><span>삭제</span></a> 
					<a href=""	class="btnType gray"  id="btnClose" name="btn"><span>취소</span></a>
				</div>
			</dd>

		</dl>
		<a href="" class="closePop"><span class="hidden">닫기</span></a>
	</div>
	
	


</form>

</body>
</html>
